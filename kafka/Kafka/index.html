<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Kafka (kafka.Kafka)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">kafka</a> &#x00BB; Kafka</nav><h1>Module <code>Kafka</code></h1></header><dl><dt class="spec type" id="type-handler"><a href="#type-handler" class="anchor"></a><code><span class="keyword">type</span> handler</code></dt><dt class="spec type" id="type-topic"><a href="#type-topic" class="anchor"></a><code><span class="keyword">type</span> topic</code></dt><dt class="spec type" id="type-queue"><a href="#type-queue" class="anchor"></a><code><span class="keyword">type</span> queue</code></dt><dt class="spec type" id="type-partition"><a href="#type-partition" class="anchor"></a><code><span class="keyword">type</span> partition</code><code> = int</code></dt><dt class="spec type" id="type-offset"><a href="#type-offset" class="anchor"></a><code><span class="keyword">type</span> offset</code><code> = int64</code></dt><dt class="spec type" id="type-message"><a href="#type-message" class="anchor"></a><code><span class="keyword">type</span> message</code><code> = </code><table class="variant"><tr id="type-message.Message" class="anchored"><td class="def constructor"><a href="#type-message.Message" class="anchor"></a><code>| </code><code><span class="constructor">Message</span> <span class="keyword">of</span> <a href="index.html#type-topic">topic</a> * <a href="index.html#type-partition">partition</a> * <a href="index.html#type-offset">offset</a> * string * <span>string option</span></code></td></tr><tr id="type-message.PartitionEnd" class="anchored"><td class="def constructor"><a href="#type-message.PartitionEnd" class="anchor"></a><code>| </code><code><span class="constructor">PartitionEnd</span> <span class="keyword">of</span> <a href="index.html#type-topic">topic</a> * <a href="index.html#type-partition">partition</a> * <a href="index.html#type-offset">offset</a></code></td></tr></table></dt><dt class="spec type" id="type-msg_id"><a href="#type-msg_id" class="anchor"></a><code><span class="keyword">type</span> msg_id</code><code> = int</code></dt><dt class="spec type" id="type-error"><a href="#type-error" class="anchor"></a><code><span class="keyword">type</span> error</code><code> = </code><table class="variant"><tr id="type-error.BAD_MSG" class="anchored"><td class="def constructor"><a href="#type-error.BAD_MSG" class="anchor"></a><code>| </code><code><span class="constructor">BAD_MSG</span></code></td></tr><tr id="type-error.BAD_COMPRESSION" class="anchored"><td class="def constructor"><a href="#type-error.BAD_COMPRESSION" class="anchor"></a><code>| </code><code><span class="constructor">BAD_COMPRESSION</span></code></td></tr><tr id="type-error.DESTROY" class="anchored"><td class="def constructor"><a href="#type-error.DESTROY" class="anchor"></a><code>| </code><code><span class="constructor">DESTROY</span></code></td></tr><tr id="type-error.FAIL" class="anchored"><td class="def constructor"><a href="#type-error.FAIL" class="anchor"></a><code>| </code><code><span class="constructor">FAIL</span></code></td></tr><tr id="type-error.TRANSPORT" class="anchored"><td class="def constructor"><a href="#type-error.TRANSPORT" class="anchor"></a><code>| </code><code><span class="constructor">TRANSPORT</span></code></td></tr><tr id="type-error.CRIT_SYS_RESOURCE" class="anchored"><td class="def constructor"><a href="#type-error.CRIT_SYS_RESOURCE" class="anchor"></a><code>| </code><code><span class="constructor">CRIT_SYS_RESOURCE</span></code></td></tr><tr id="type-error.RESOLVE" class="anchored"><td class="def constructor"><a href="#type-error.RESOLVE" class="anchor"></a><code>| </code><code><span class="constructor">RESOLVE</span></code></td></tr><tr id="type-error.MSG_TIMED_OUT" class="anchored"><td class="def constructor"><a href="#type-error.MSG_TIMED_OUT" class="anchor"></a><code>| </code><code><span class="constructor">MSG_TIMED_OUT</span></code></td></tr><tr id="type-error.UNKNOWN_PARTITION" class="anchored"><td class="def constructor"><a href="#type-error.UNKNOWN_PARTITION" class="anchor"></a><code>| </code><code><span class="constructor">UNKNOWN_PARTITION</span></code></td></tr><tr id="type-error.FS" class="anchored"><td class="def constructor"><a href="#type-error.FS" class="anchor"></a><code>| </code><code><span class="constructor">FS</span></code></td></tr><tr id="type-error.UNKNOWN_TOPIC" class="anchored"><td class="def constructor"><a href="#type-error.UNKNOWN_TOPIC" class="anchor"></a><code>| </code><code><span class="constructor">UNKNOWN_TOPIC</span></code></td></tr><tr id="type-error.ALL_BROKERS_DOWN" class="anchored"><td class="def constructor"><a href="#type-error.ALL_BROKERS_DOWN" class="anchor"></a><code>| </code><code><span class="constructor">ALL_BROKERS_DOWN</span></code></td></tr><tr id="type-error.INVALID_ARG" class="anchored"><td class="def constructor"><a href="#type-error.INVALID_ARG" class="anchor"></a><code>| </code><code><span class="constructor">INVALID_ARG</span></code></td></tr><tr id="type-error.TIMED_OUT" class="anchored"><td class="def constructor"><a href="#type-error.TIMED_OUT" class="anchor"></a><code>| </code><code><span class="constructor">TIMED_OUT</span></code></td></tr><tr id="type-error.QUEUE_FULL" class="anchored"><td class="def constructor"><a href="#type-error.QUEUE_FULL" class="anchor"></a><code>| </code><code><span class="constructor">QUEUE_FULL</span></code></td></tr><tr id="type-error.ISR_INSUFF" class="anchored"><td class="def constructor"><a href="#type-error.ISR_INSUFF" class="anchor"></a><code>| </code><code><span class="constructor">ISR_INSUFF</span></code></td></tr><tr id="type-error.UNKNOWN" class="anchored"><td class="def constructor"><a href="#type-error.UNKNOWN" class="anchor"></a><code>| </code><code><span class="constructor">UNKNOWN</span></code></td></tr><tr id="type-error.OFFSET_OUT_OF_RANGE" class="anchored"><td class="def constructor"><a href="#type-error.OFFSET_OUT_OF_RANGE" class="anchor"></a><code>| </code><code><span class="constructor">OFFSET_OUT_OF_RANGE</span></code></td></tr><tr id="type-error.INVALID_MSG" class="anchored"><td class="def constructor"><a href="#type-error.INVALID_MSG" class="anchor"></a><code>| </code><code><span class="constructor">INVALID_MSG</span></code></td></tr><tr id="type-error.UNKNOWN_TOPIC_OR_PART" class="anchored"><td class="def constructor"><a href="#type-error.UNKNOWN_TOPIC_OR_PART" class="anchor"></a><code>| </code><code><span class="constructor">UNKNOWN_TOPIC_OR_PART</span></code></td></tr><tr id="type-error.INVALID_MSG_SIZE" class="anchored"><td class="def constructor"><a href="#type-error.INVALID_MSG_SIZE" class="anchor"></a><code>| </code><code><span class="constructor">INVALID_MSG_SIZE</span></code></td></tr><tr id="type-error.LEADER_NOT_AVAILABLE" class="anchored"><td class="def constructor"><a href="#type-error.LEADER_NOT_AVAILABLE" class="anchor"></a><code>| </code><code><span class="constructor">LEADER_NOT_AVAILABLE</span></code></td></tr><tr id="type-error.NOT_LEADER_FOR_PARTITION" class="anchored"><td class="def constructor"><a href="#type-error.NOT_LEADER_FOR_PARTITION" class="anchor"></a><code>| </code><code><span class="constructor">NOT_LEADER_FOR_PARTITION</span></code></td></tr><tr id="type-error.REQUEST_TIMED_OUT" class="anchored"><td class="def constructor"><a href="#type-error.REQUEST_TIMED_OUT" class="anchor"></a><code>| </code><code><span class="constructor">REQUEST_TIMED_OUT</span></code></td></tr><tr id="type-error.BROKER_NOT_AVAILABLE" class="anchored"><td class="def constructor"><a href="#type-error.BROKER_NOT_AVAILABLE" class="anchor"></a><code>| </code><code><span class="constructor">BROKER_NOT_AVAILABLE</span></code></td></tr><tr id="type-error.REPLICA_NOT_AVAILABLE" class="anchored"><td class="def constructor"><a href="#type-error.REPLICA_NOT_AVAILABLE" class="anchor"></a><code>| </code><code><span class="constructor">REPLICA_NOT_AVAILABLE</span></code></td></tr><tr id="type-error.MSG_SIZE_TOO_LARGE" class="anchored"><td class="def constructor"><a href="#type-error.MSG_SIZE_TOO_LARGE" class="anchor"></a><code>| </code><code><span class="constructor">MSG_SIZE_TOO_LARGE</span></code></td></tr><tr id="type-error.STALE_CTRL_EPOCH" class="anchored"><td class="def constructor"><a href="#type-error.STALE_CTRL_EPOCH" class="anchor"></a><code>| </code><code><span class="constructor">STALE_CTRL_EPOCH</span></code></td></tr><tr id="type-error.OFFSET_METADATA_TOO_LARGE" class="anchored"><td class="def constructor"><a href="#type-error.OFFSET_METADATA_TOO_LARGE" class="anchor"></a><code>| </code><code><span class="constructor">OFFSET_METADATA_TOO_LARGE</span></code></td></tr><tr id="type-error.CONF_UNKNOWN" class="anchored"><td class="def constructor"><a href="#type-error.CONF_UNKNOWN" class="anchor"></a><code>| </code><code><span class="constructor">CONF_UNKNOWN</span></code></td></tr><tr id="type-error.CONF_INVALID" class="anchored"><td class="def constructor"><a href="#type-error.CONF_INVALID" class="anchor"></a><code>| </code><code><span class="constructor">CONF_INVALID</span></code></td></tr></table></dt></dl><dl><dt class="spec exception" id="exception-Error"><a href="#exception-Error" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">Error</span> <span class="keyword">of</span> <a href="index.html#type-error">error</a> * string</code></dt></dl><dl><dt class="spec value" id="val-new_consumer"><a href="#val-new_consumer" class="anchor"></a><code><span class="keyword">val</span> new_consumer : <span><span>(string * string)</span> list</span> <span>&#45;&gt;</span> <a href="index.html#type-handler">handler</a></code></dt><dt class="spec value" id="val-new_producer"><a href="#val-new_producer" class="anchor"></a><code><span class="keyword">val</span> new_producer : <span>?&#8288;delivery_callback:<span>(<a href="index.html#type-msg_id">msg_id</a> <span>&#45;&gt;</span> <span><a href="index.html#type-error">error</a> option</span> <span>&#45;&gt;</span> unit)</span></span> <span>&#45;&gt;</span> <span><span>(string * string)</span> list</span> <span>&#45;&gt;</span> <a href="index.html#type-handler">handler</a></code></dt><dt class="spec value" id="val-destroy_handler"><a href="#val-destroy_handler" class="anchor"></a><code><span class="keyword">val</span> destroy_handler : <a href="index.html#type-handler">handler</a> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-handler_name"><a href="#val-handler_name" class="anchor"></a><code><span class="keyword">val</span> handler_name : <a href="index.html#type-handler">handler</a> <span>&#45;&gt;</span> string</code></dt><dt class="spec value" id="val-new_topic"><a href="#val-new_topic" class="anchor"></a><code><span class="keyword">val</span> new_topic : <span>?&#8288;partitioner_callback:<span>(int <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="index.html#type-partition">partition</a>)</span></span> <span>&#45;&gt;</span> <a href="index.html#type-handler">handler</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span>(string * string)</span> list</span> <span>&#45;&gt;</span> <a href="index.html#type-topic">topic</a></code></dt><dt class="spec value" id="val-destroy_topic"><a href="#val-destroy_topic" class="anchor"></a><code><span class="keyword">val</span> destroy_topic : <a href="index.html#type-topic">topic</a> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-topic_name"><a href="#val-topic_name" class="anchor"></a><code><span class="keyword">val</span> topic_name : <a href="index.html#type-topic">topic</a> <span>&#45;&gt;</span> string</code></dt><dt class="spec value" id="val-produce"><a href="#val-produce" class="anchor"></a><code><span class="keyword">val</span> produce : <a href="index.html#type-topic">topic</a> <span>&#45;&gt;</span> <a href="index.html#type-partition">partition</a> <span>&#45;&gt;</span> <span>?&#8288;key:string</span> <span>&#45;&gt;</span> <span>?&#8288;msg_id:<a href="index.html#type-msg_id">msg_id</a></span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-partition_unassigned"><a href="#val-partition_unassigned" class="anchor"></a><code><span class="keyword">val</span> partition_unassigned : <a href="index.html#type-partition">partition</a></code></dt><dt class="spec value" id="val-outq_len"><a href="#val-outq_len" class="anchor"></a><code><span class="keyword">val</span> outq_len : <a href="index.html#type-handler">handler</a> <span>&#45;&gt;</span> int</code></dt><dt class="spec value" id="val-poll_events"><a href="#val-poll_events" class="anchor"></a><code><span class="keyword">val</span> poll_events : <span>?&#8288;timeout_ms:int</span> <span>&#45;&gt;</span> <a href="index.html#type-handler">handler</a> <span>&#45;&gt;</span> int</code></dt><dt class="spec value" id="val-wait_delivery"><a href="#val-wait_delivery" class="anchor"></a><code><span class="keyword">val</span> wait_delivery : <span>?&#8288;timeout_ms:int</span> <span>&#45;&gt;</span> <span>?&#8288;max_outq_len:int</span> <span>&#45;&gt;</span> <a href="index.html#type-handler">handler</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Wait that messages are delivered (waiting that less than max_outq_len messages are pending).</p></dd></dl><dl><dt class="spec value" id="val-consume_start"><a href="#val-consume_start" class="anchor"></a><code><span class="keyword">val</span> consume_start : <a href="index.html#type-topic">topic</a> <span>&#45;&gt;</span> <a href="index.html#type-partition">partition</a> <span>&#45;&gt;</span> <a href="index.html#type-offset">offset</a> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-offset_beginning"><a href="#val-offset_beginning" class="anchor"></a><code><span class="keyword">val</span> offset_beginning : <a href="index.html#type-offset">offset</a></code></dt><dt class="spec value" id="val-offset_end"><a href="#val-offset_end" class="anchor"></a><code><span class="keyword">val</span> offset_end : <a href="index.html#type-offset">offset</a></code></dt><dt class="spec value" id="val-offset_stored"><a href="#val-offset_stored" class="anchor"></a><code><span class="keyword">val</span> offset_stored : <a href="index.html#type-offset">offset</a></code></dt><dt class="spec value" id="val-offset_tail"><a href="#val-offset_tail" class="anchor"></a><code><span class="keyword">val</span> offset_tail : int <span>&#45;&gt;</span> <a href="index.html#type-offset">offset</a></code></dt><dt class="spec value" id="val-consume_stop"><a href="#val-consume_stop" class="anchor"></a><code><span class="keyword">val</span> consume_stop : <a href="index.html#type-topic">topic</a> <span>&#45;&gt;</span> <a href="index.html#type-partition">partition</a> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-consume"><a href="#val-consume" class="anchor"></a><code><span class="keyword">val</span> consume : <span>?&#8288;timeout_ms:int</span> <span>&#45;&gt;</span> <a href="index.html#type-topic">topic</a> <span>&#45;&gt;</span> <a href="index.html#type-partition">partition</a> <span>&#45;&gt;</span> <a href="index.html#type-message">message</a></code></dt><dt class="spec value" id="val-consume_batch"><a href="#val-consume_batch" class="anchor"></a><code><span class="keyword">val</span> consume_batch : <span>?&#8288;timeout_ms:int</span> <span>&#45;&gt;</span> <span>?&#8288;msg_count:int</span> <span>&#45;&gt;</span> <a href="index.html#type-topic">topic</a> <span>&#45;&gt;</span> <a href="index.html#type-partition">partition</a> <span>&#45;&gt;</span> <span><a href="index.html#type-message">message</a> list</span></code></dt><dt class="spec value" id="val-new_queue"><a href="#val-new_queue" class="anchor"></a><code><span class="keyword">val</span> new_queue : <a href="index.html#type-handler">handler</a> <span>&#45;&gt;</span> <a href="index.html#type-queue">queue</a></code></dt><dt class="spec value" id="val-destroy_queue"><a href="#val-destroy_queue" class="anchor"></a><code><span class="keyword">val</span> destroy_queue : <a href="index.html#type-queue">queue</a> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-consume_start_queue"><a href="#val-consume_start_queue" class="anchor"></a><code><span class="keyword">val</span> consume_start_queue : <a href="index.html#type-queue">queue</a> <span>&#45;&gt;</span> <a href="index.html#type-topic">topic</a> <span>&#45;&gt;</span> <a href="index.html#type-partition">partition</a> <span>&#45;&gt;</span> <a href="index.html#type-offset">offset</a> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-consume_queue"><a href="#val-consume_queue" class="anchor"></a><code><span class="keyword">val</span> consume_queue : <span>?&#8288;timeout_ms:int</span> <span>&#45;&gt;</span> <a href="index.html#type-queue">queue</a> <span>&#45;&gt;</span> <a href="index.html#type-message">message</a></code></dt><dt class="spec value" id="val-consume_batch_queue"><a href="#val-consume_batch_queue" class="anchor"></a><code><span class="keyword">val</span> consume_batch_queue : <span>?&#8288;timeout_ms:int</span> <span>&#45;&gt;</span> <span>?&#8288;msg_count:int</span> <span>&#45;&gt;</span> <a href="index.html#type-queue">queue</a> <span>&#45;&gt;</span> <span><a href="index.html#type-message">message</a> list</span></code></dt><dt class="spec value" id="val-store_offset"><a href="#val-store_offset" class="anchor"></a><code><span class="keyword">val</span> store_offset : <a href="index.html#type-topic">topic</a> <span>&#45;&gt;</span> <a href="index.html#type-partition">partition</a> <span>&#45;&gt;</span> <a href="index.html#type-offset">offset</a> <span>&#45;&gt;</span> unit</code></dt></dl><div class="spec module" id="module-Metadata"><a href="#module-Metadata" class="anchor"></a><code><span class="keyword">module</span> <a href="Metadata/index.html">Metadata</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-topic_metadata"><a href="#val-topic_metadata" class="anchor"></a><code><span class="keyword">val</span> topic_metadata : <span>?&#8288;timeout_ms:int</span> <span>&#45;&gt;</span> <a href="index.html#type-handler">handler</a> <span>&#45;&gt;</span> <a href="index.html#type-topic">topic</a> <span>&#45;&gt;</span> <a href="Metadata/index.html#type-topic_metadata">Metadata.topic_metadata</a></code></dt><dt class="spec value" id="val-local_topics_metadata"><a href="#val-local_topics_metadata" class="anchor"></a><code><span class="keyword">val</span> local_topics_metadata : <span>?&#8288;timeout_ms:int</span> <span>&#45;&gt;</span> <a href="index.html#type-handler">handler</a> <span>&#45;&gt;</span> <span><a href="Metadata/index.html#type-topic_metadata">Metadata.topic_metadata</a> list</span></code></dt><dt class="spec value" id="val-all_topics_metadata"><a href="#val-all_topics_metadata" class="anchor"></a><code><span class="keyword">val</span> all_topics_metadata : <span>?&#8288;timeout_ms:int</span> <span>&#45;&gt;</span> <a href="index.html#type-handler">handler</a> <span>&#45;&gt;</span> <span><a href="Metadata/index.html#type-topic_metadata">Metadata.topic_metadata</a> list</span></code></dt></dl></div></body></html>